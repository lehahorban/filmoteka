{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,uBACnCC,SAAUF,SAASC,cAAc,qBACjCE,KAAMH,SAASC,cAAc,sBAGT,IAAI,EAAAL,EAAAQ,SAS1B,SAASC,IAGP,GAFAC,QAAQC,IAAIC,KAEW,UAAnBA,IACF,OAGF,MAAMC,EAAwBC,KAAKC,MAAMC,aAAaC,QAAQ,UAE9D,GAAIJ,GASN,SAAyBK,GACvBhB,EAAKK,KAAKY,UAAYD,EACnBE,KAAIC,IACH,IAAIC,EAAmBR,KAAKC,MAAMC,aAAaC,QAAQ,WA2C7CG,KAAIG,GACTA,EAAMC,OAFjB,IAmBsBC,EAzDhB,OAHIH,EAAQI,OAAS,IACnBJ,EAAU,CAACA,EAAQ,GAAIA,EAAQ,GAAI,UAE9B,gCAAgCD,EAAMM,eAAeN,EAAMM,gEAyDlDF,EAtDZJ,EAAMO,YAuDVH,EACK,uCAAuCA,IAEzC,sJAvD8BJ,EAAMQ,OAASR,EAAMG,kDAE9CF,EAAQQ,KAAK,OAAS,uFAGjBT,EAAMU,cAAgBV,EAAMW,gBAAkB,IAAIC,MACjD,EACA,IACG,2DAMlBH,KAAK,IAER,MAAMI,EAAc9B,SAASC,cAAc,gBAQZ8B,EAPH,QAQvBnB,aAAaC,QAAQkB,IAI0C,IAA7DrB,KAAKC,MAAMC,aAAaC,QAAQkB,IAAkBT,OATvDQ,EAAYE,MAAMC,QAAU,OAF5BH,EAAYE,MAAMC,QAAU,QAMhC,IAAiCF,EA7C7BG,CAAgBzB,OACX,CACeT,SAASC,cAAc,gBAC/B+B,MAAMC,QAAU,QAC5BnC,EAAKK,KAAKY,UAAY,IArB1BjB,EAAKI,SAASiC,iBAAiB,SAE/B,WACErC,EAAKC,WAAWqC,UAAUC,OAAO,wBACjCvC,EAAKI,SAASkC,UAAUE,IAAI,wBAC5BjC,OA6EF,SAASG,IAGP,OAFsBR,SAASC,cAAc,uBAExBmC,UAAUG,SAAS,wBACpC,UACA,QAVgBvC,SAASC,cAAc,UAC/BkC,iBAAiB,SAASK,IACtCC,YAAW,IAAMpC,KAAmB","sources":["src/js/queue-button.js"],"sourcesContent":["import TopMovies from './work-with-api.js';\n\nconst refs = {\n  watchedBtn: document.querySelector('.header_btn-watched'),\n  queueBtn: document.querySelector('.header_btn-queue'),\n  list: document.querySelector('.movie-collection'),\n};\n\nconst topMoviesList = new TopMovies();\n\nrefs.queueBtn.addEventListener('click', onWatchedBtnClick);\n\nfunction onWatchedBtnClick() {\n  refs.watchedBtn.classList.remove('header-active-button');\n  refs.queueBtn.classList.add('header-active-button');\n  onWatchedMarkup();\n}\nfunction onWatchedMarkup() {\n  console.log(getActiveTab());\n\n  if (getActiveTab() !== 'queue') {\n    return;\n  }\n\n  const filmsFromLocalStorage = JSON.parse(localStorage.getItem('queue'));\n\n  if (filmsFromLocalStorage) {\n    topMoviesMarkUp(filmsFromLocalStorage);\n  } else {\n    const placeholder = document.querySelector('.placeholder');\n    placeholder.style.display = 'block';\n    refs.list.innerHTML = '';\n  }\n}\n\nfunction topMoviesMarkUp(movies) {\n  refs.list.innerHTML = movies\n    .map(movie => {\n      let movie_g = getGenrs(JSON.parse(localStorage.getItem('genres')));\n      if (movie_g.length > 2) {\n        movie_g = [movie_g[0], movie_g[1], 'Other'];\n      }\n      return `<li class=\"movies__item\" id=\"${movie.id}\" data-id=${movie.id}>\n    <a href=\"\" class=\"movies__link\">\n        <img src='${checkImgLink(\n          movie.poster_path\n        )}' class=\"movie__image\" alt=\"Movie\">\n        <div class=\"movie__text-part\">\n            <h2 class=\"movie__title\">${movie.title || movie.name}</h2>\n            <p class=\"movie__genre\">${\n              movie_g.join(', ') || 'No data'\n            } <span class=\"stick\">|</span> \n                <span class=\"movie__year\">${\n                  (movie.release_date || movie.first_air_date || '').slice(\n                    0,\n                    4\n                  ) || 'No data'\n                }</span></p>\n        </div>\n    </a>\n</li>`;\n    })\n    .join('');\n\n  const placeholder = document.querySelector('.placeholder');\n  if (isLocalStorageItemEmpty('queue')) {\n    placeholder.style.display = 'block';\n  } else {\n    placeholder.style.display = 'none';\n  }\n}\n\nfunction isLocalStorageItemEmpty(localStorageKey) {\n  if (!localStorage.getItem(localStorageKey)) {\n    return true;\n  }\n\n  return JSON.parse(localStorage.getItem(localStorageKey)).length === 0;\n}\n\nfunction getGenrs(genres) {\n  return genres.map(genre => {\n    return genre.name;\n  });\n}\n\n//Rerender after delete movie\nconst btnAddToQueue = document.querySelector('.queue');\nbtnAddToQueue.addEventListener('click', e => {\n  setTimeout(() => onWatchedMarkup(), 100); //Dirty hack due to late work with localstorage\n});\n\nfunction getActiveTab() {\n  const watchedButton = document.querySelector('.header_btn-watched');\n\n  return watchedButton.classList.contains('header-active-button')\n    ? 'watched'\n    : 'queue';\n}\nfunction checkImgLink(data) {\n  if (data) {\n    return `https://image.tmdb.org/t/p/original/${data}`;\n  }\n  return `https://bflix.biz/no-poster.png`;\n}\n"],"names":["$kKeZA","parcelRequire","$81e65ef3b33353f8$var$refs","watchedBtn","document","querySelector","queueBtn","list","default","$81e65ef3b33353f8$var$onWatchedMarkup","console","log","$81e65ef3b33353f8$var$getActiveTab","filmsFromLocalStorage","JSON","parse","localStorage","getItem","movies","innerHTML","map","movie","movie_g","genre","name","data","length","id","poster_path","title","join","release_date","first_air_date","slice","placeholder","localStorageKey","style","display","$81e65ef3b33353f8$var$topMoviesMarkUp","addEventListener","classList","remove","add","contains","e","setTimeout"],"version":3,"file":"library.958ee97c.js.map"}