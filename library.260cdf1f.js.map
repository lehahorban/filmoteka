{"mappings":"YAEA,MAAMA,EAAgBC,SAASC,cAAc,WACvCC,EAAgBF,SAASC,cAAc,UACvCE,EAAOH,SAASC,cAAc,qBAEpC,IAAIG,EAAgB,GAGpBL,EAAcM,iBAAiB,SAASC,IACtC,MACMC,EADcD,EAAEE,OAAOC,QAAQ,wBACXC,aAAa,WAEjCC,GA0BmBC,EA1BOC,SAASN,GA+BlCO,KAAKC,MAAMC,aAAaC,QAAQ,eAJhBC,QAAOC,GAAMA,EAAGP,KAAOA,IAAI,IADpD,IAA2BA,EAzBrBI,aAAaC,QAAQ,aACvBb,EAAgBU,KAAKC,MAAMC,aAAaC,QAAQ,aAGlD,IAAIG,GAAgB,EACpB,IAAK,IAAID,KAAMf,EACb,GAAIe,EAAGP,KAAOD,EAAMC,GAAI,CACtBQ,GAAgB,EAChB,MAICA,IAkEP,SAA2BR,GACzB,MACMS,EADQP,KAAKC,MAAMC,aAAaC,QAAQ,YACvBC,QAAOC,GAAMA,EAAGP,KAAOA,IAC9CI,aAAaM,QAAQ,UAAWR,KAAKS,UAAUF,IA/D7CG,CAAkBb,EAAMC,IAExBb,EAAc0B,YAAc,mBAP5BrB,EAAcsB,KAAKf,GACnBK,aAAaM,QAAQ,UAAWR,KAAKS,UAAUnB,IAE/CL,EAAc0B,YAAc,0BAkBhCtB,EAAKE,iBAAiB,SAEtB,SAA4BC,GAC1B,GAAIA,EAAEE,SAAWL,EAAM,CACrB,MAAMwB,EAAUd,SAASP,EAAEE,OAAOC,QAAQ,iBAAiBmB,QAAQhB,IAC7DiB,EAAwBf,KAAKC,MAAMC,aAAaC,QAAQ,YACxDa,EAAiBhB,KAAKC,MAAMC,aAAaC,QAAQ,UAGvD,GAAIY,EAAuB,CACzB,IAAIE,GAAmB,EACvB,IAAK,MAAMC,KAAQH,EACbG,EAAKpB,KAAOe,IACdI,GAAmB,GAKrBhC,EAAc0B,YADZM,EAC0B,sBAGA,iBAKhC,GAAID,EAAgB,CAClB,IAAIC,GAAmB,EACvB,IAAK,MAAMC,KAAQF,EACbE,EAAKpB,KAAOe,IACdI,GAAmB,GAKrB7B,EAAcuB,YADZM,EAC0B,oBAGA,oB","sources":["src/js/addtowatched.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\n\nconst btnAddToWatch = document.querySelector('.wached');\nconst btnAddToQueue = document.querySelector('.queue');\nconst btns = document.querySelector('.movie-collection');\n\nlet watchedMovies = [];\n\n\nbtnAddToWatch.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n\n  const movie = fetchMovieDetails(parseInt(movId));\n  if (localStorage.getItem('watched')) {\n    watchedMovies = JSON.parse(localStorage.getItem('watched'));\n  }\n\n  let isMovieExists = false;\n  for (let el of watchedMovies) {\n    if (el.id === movie.id) {\n      isMovieExists = true;\n      break;\n    }\n  }\n\n  if (!isMovieExists) {\n    watchedMovies.push(movie);\n    localStorage.setItem('watched', JSON.stringify(watchedMovies));\n\n    btnAddToWatch.textContent = 'Remove from Watched';\n  } else {\n    removeFromWatched(movie.id);\n\n    btnAddToWatch.textContent = 'add to Watched';\n  }\n});\n\n\nfunction fetchMovieDetails(id) {\n  return getPageMovies().filter(el => el.id === id)[0];\n}\n\nfunction getPageMovies() {\n  return JSON.parse(localStorage.getItem('pageMovies'));\n}\n\n\nbtns.addEventListener('click', changeTextOnButton);\n\nfunction changeTextOnButton(e) {\n  if (e.target !== btns) {\n    const movieId = parseInt(e.target.closest('.movies__item').dataset.id);\n    const filmsFromLocalStorage = JSON.parse(localStorage.getItem('watched'));\n    const filmsFromQueue = JSON.parse(localStorage.getItem('queue'));\n\n\n    if (filmsFromLocalStorage) {\n      let isMovieInLibrary = false;\n      for (const film of filmsFromLocalStorage) {\n        if (film.id === movieId) {\n          isMovieInLibrary = true;\n        }\n      }\n\n      if (isMovieInLibrary) {\n        btnAddToWatch.textContent = 'Remove from Watched';\n      }\n      else {\n        btnAddToWatch.textContent = 'Add to Watched';\n      }\n    }\n\n\n    if (filmsFromQueue) {\n      let isMovieInLibrary = false;\n      for (const film of filmsFromQueue) {\n        if (film.id === movieId) {\n          isMovieInLibrary = true;\n        }\n      }\n\n      if (isMovieInLibrary) {\n        btnAddToQueue.textContent = 'Remove from Queue';\n      }\n      else {\n        btnAddToQueue.textContent = 'Add to queue';\n      }\n    }\n  }\n}\n\nfunction removeFromWatched(id) {\n  const films = JSON.parse(localStorage.getItem('watched'));\n  const filtered = films.filter(el => el.id !== id);\n  localStorage.setItem('watched', JSON.stringify(filtered));\n}\n\n"],"names":["$d2f44f7d36d6b000$var$btnAddToWatch","document","querySelector","$d2f44f7d36d6b000$var$btnAddToQueue","$d2f44f7d36d6b000$var$btns","$d2f44f7d36d6b000$var$watchedMovies","addEventListener","e","movId","target","closest","getAttribute","movie","id","parseInt","JSON","parse","localStorage","getItem","filter","el","isMovieExists","filtered","setItem","stringify","$d2f44f7d36d6b000$var$removeFromWatched","textContent","push","movieId","dataset","filmsFromLocalStorage","filmsFromQueue","isMovieInLibrary","film"],"version":3,"file":"library.260cdf1f.js.map"}