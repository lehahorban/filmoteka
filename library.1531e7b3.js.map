{"mappings":"AAEsBA,SAASC,cAAc,WAA7C,MACMC,EAAgBF,SAASC,cAAc,UAE7C,IAAIE,EAAc,GAElBD,EAAcE,iBAAiB,SAASC,IACtC,MACMC,EADcD,EAAEE,OAAOC,QAAQ,wBACXC,aAAa,WAEjCC,GA4BmBC,EA5BOC,SAASN,GAiClCO,KAAKC,MAAMC,aAAaC,QAAQ,eAJhBC,QAAOC,GAAMA,EAAGP,KAAOA,IAAI,IADpD,IAA2BA,EA3BrBI,aAAaC,QAAQ,WACvBb,EAAcU,KAAKC,MAAMC,aAAaC,QAAQ,WAEhD,IAAIG,GAAgB,EACpB,IAAK,IAAID,KAAMf,EACb,GAAIe,EAAGP,KAAOD,EAAMC,GAAI,CACtBQ,GAAgB,EAChB,MAICA,IAUP,SAAyBR,GACvB,MACMS,EADQP,KAAKC,MAAMC,aAAaC,QAAQ,UACvBC,QAAOC,GAAMA,EAAGP,KAAOA,IAC9CI,aAAaM,QAAQ,QAASR,KAAKS,UAAUF,IAR3CG,CAAgBb,EAAMC,IACtBT,EAAcsB,YAAc,iBAL5BrB,EAAYsB,KAAKf,GACjBK,aAAaM,QAAQ,QAASR,KAAKS,UAAUnB,IAC7CD,EAAcsB,YAAc","sources":["src/js/addtoqueue.js"],"sourcesContent":["// (FT-18 За натисканням на кнопку \"Add to watched\" фільм додається до переглянутих фільмів поточного користувача (local-storage))\n\nconst btnAddToWatch = document.querySelector('.wached');\nconst btnAddToQueue = document.querySelector('.queue');\n\nlet queueMovies = [];\n\nbtnAddToQueue.addEventListener('click', e => {\n  const isCardMovie = e.target.closest('.modal__card-content');\n  const movId = isCardMovie.getAttribute('data-id');\n\n  const movie = fetchMovieDetails(parseInt(movId));\n  if (localStorage.getItem('queue')) {\n    queueMovies = JSON.parse(localStorage.getItem('queue'));\n  }\n  let isMovieExists = false;\n  for (let el of queueMovies) {\n    if (el.id === movie.id) {\n      isMovieExists = true;\n      break;\n    }\n  }\n\n  if (!isMovieExists) {\n    queueMovies.push(movie);\n    localStorage.setItem('queue', JSON.stringify(queueMovies));\n    btnAddToQueue.textContent = 'remove from queue';\n  } else {\n    removeFromQueue(movie.id);\n    btnAddToQueue.textContent = 'add to queue';\n  }\n});\n\nfunction removeFromQueue(id) {\n  const films = JSON.parse(localStorage.getItem('queue'));\n  const filtered = films.filter(el => el.id !== id);\n  localStorage.setItem('queue', JSON.stringify(filtered));\n}\n\nfunction fetchMovieDetails(id) {\n  return getPageMovies().filter(el => el.id === id)[0];\n}\n\nfunction getPageMovies() {\n  return JSON.parse(localStorage.getItem('pageMovies'));\n}\n"],"names":["document","querySelector","$b48e09543541a962$var$btnAddToQueue","$b48e09543541a962$var$queueMovies","addEventListener","e","movId","target","closest","getAttribute","movie","id","parseInt","JSON","parse","localStorage","getItem","filter","el","isMovieExists","filtered","setItem","stringify","$b48e09543541a962$var$removeFromQueue","textContent","push"],"version":3,"file":"library.1531e7b3.js.map"}